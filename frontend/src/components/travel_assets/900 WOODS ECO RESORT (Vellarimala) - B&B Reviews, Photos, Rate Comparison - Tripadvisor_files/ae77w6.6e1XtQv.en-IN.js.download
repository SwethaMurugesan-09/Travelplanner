(this.$WP=this.$WP||[]).push(["ae77w6",(e,a)=>{var r,t,l,n,i,s,d,o,c,u,m,f,b,p,_,g,h,v,I,C,y,A,L,E,R,N,S,w,T,M,P,O,k,U,B,W,F,G,D,V,x,j,q,H,Y,K,z,Q,$,Z,X,J,ee,ea,er,et,el,en,ei,es,ed,eo,ec,eu,em,ef,eb,ep,e_,eg,eh,ev,eI={controlsContainer:"wxNSB Cj Gi",loading:"SjZfD",header:"Pe S5 H4 b"},eC=({header:e,children:a,loading:l,onHeightChange:i,filterExpand:s})=>{var d=n(null);return ei(()=>{var e=d.current?.clientHeight;e&&i(e)},[i,s,a]),r("div",{className:`${eI.controlsContainer} ${l?eI.loading:""}`,ref:d,children:[e&&t("div",{className:eI.header,children:e}),a]})},ey=({selectedSourceId:e,sourceCounts:a,onSelect:r})=>{var{localize:l}=H(),n=i(()=>{if(!a)return[];var e=[];return Object.keys(a).includes(h.allIncludingRestricted)&&a[h.allIncludingRestricted]>0?e.push(h.allIncludingRestricted):Object.keys(a).includes(h.allUnrestricted)&&a[h.allUnrestricted]>0&&e.push(h.allUnrestricted),Object.keys(a).includes(h.traveler)&&a[h.traveler]>0&&e.push(h.traveler),Object.keys(a).includes(h.management)&&a[h.management]>0&&e.push(h.management),Object.keys(a).includes(h.staff)&&a[h.staff]>0&&e.push(h.staff),2===e.length&&e.shift(),e.filter(a=>!(2===e.length&&(a===h.allUnrestricted||a===h.allIncludingRestricted))).map(e=>({value:e,displayName:l.string("Photos from {source} ({count})","mv_photos_from_with_count",{source:v(I(e),l),count:a[e]})}))},[a,l]);if(0===n.length)return null;var s=n.find(a=>a.value===C[e])?C[e]:n[0].value;return t("div",{className:"d",children:t(es,{label:l.string("Filter by","hr_mediaviewer_filter_by_label"),trigger:"chip",options:n,value:s,onChange:e=>r(y[e]),fullscreenMobile:!0})})},eA={textWrapper:"f u",spacing:"PO"},eL=({expanded:e,onClick:a})=>t(ec,{onClick:a,children:t("span",{className:eA.textWrapper,children:e?r(l,{children:[t("span",{className:eA.spacing,children:t(q,{id:"mv_hide_filters",messages:"Hide filters"})}),t(eo,{})]}):r(l,{children:[t("span",{className:eA.spacing,children:t(q,{id:"mv_see_all_filters",messages:"See all filters"})}),t(ed,{})]})})}),eE=({name:e,count:a,onSelect:r,selected:l})=>{var{localize:n}=H();if(!a)return null;var i=n.string("Apply {0} filter ","phoenix_accessibility_apply_filter_label",{0:e});return t(eu,{selected:l,onClick:r,"aria-label":i,marginX:"spacing-01",marginBottom:"spacing-02",children:t(q,{id:"airm_geo_fffff486",args:{0:e,1:a},messages:"{0} ({1})"})})},eR={albumPills:"C",expandButtonInlineWrapper:"PC"},eN=({albums:e,selectedTypeId:a,selectedFilterId:l,selectedAlbumId:i,onSelect:d,onExpandChange:o,trackingCallback:c})=>{var u,m=M(),f=e,b=n(!0),[p,_]=s(!1);u=a===y.ALL_INCLUDING_RESTRICTED||a===y.ALL_UNRESTRICTED?A(y.ALL_UNRESTRICTED):A(a);var g=L.has(i)||l===E.PANO_ALBUM;if(g){var h=e.find(e=>e.albumId===l);h&&(f=[h])}var v=(e,a)=>()=>{c&&c("clickFilterInMediaViewer",a),d(e)},I=f.filter(e=>e.mediaCounts[u]>0);ei(()=>{_(!1),b.current=!0,o(b.current)},[i,o]),ei(()=>{var e=1===I.length;g||e?(_(!0),b.current=!1):b.current=!0},[i,g,I]);var C=t(eb,{expanded:p,onClick:()=>(p?m(P.HIDE_FILTERS_CLICK):(c&&c("clickShowAllFiltersInMediaViewer","showAllFiltersButton"),m(P.SEE_ALL_FILTERS_CLICK)),_(!p))});if(!p){var R=I.filter(e=>e.albumId===l||l===E.TRAVELER_ALBUM&&e.albumId===E.ALL_ALBUMS);return r("span",{children:[R.map(e=>t("span",{className:eR.albumPills,children:t(ep,{name:e.name,count:e.mediaCounts[u],onSelect:v(e.albumId,e.name),selected:!0},e.albumId)},`span-${e.albumId}`)),b.current&&t("span",{className:eR.expandButtonInlineWrapper,children:C})]})}return r("div",{className:eR.albumPills,children:[I.map(e=>{if(i!==E.VIDEO&&e.albumId===E.VIDEO||l!==E.PANO_ALBUM&&e.albumId===E.PANO_ALBUM)return null;var a=e.albumId===l||l===E.TRAVELER_ALBUM&&e.albumId===E.ALL_ALBUMS;return t(ep,{name:e.name,count:e.mediaCounts[u],onSelect:v(e.albumId,e.name),selected:a},e.albumId)}),b.current&&t("div",{children:C})]})},eS=({selectedSort:e,onSelect:a})=>{var{localize:r}=H(),l=i(()=>[{value:w.featured,displayName:r.string("Featured","hr_mediaviewer_filter_by_featured")},{value:w.recency,displayName:r.string("Recency","hr_mediaviewer_filter_by_recency")}],[r]);return t(es,{label:r.string("Sort by","hr_mediaviewer_sort_by_label"),options:l,value:e,onChange:a,menuVariant:"trailing-top-caret",trigger:"chip",fullscreenMobile:!0})},ew={__key:0xc407c194b331,id:"c407c194b331fe63",loc:{},definitions:[]},eT={absolute:"SptgK",overlayIcon:"bHHNF Cf c",iconWrapper:"pFIwI o Rc",travellerIcon:"QrBpp"},eM=(e,a)=>t("div",{className:eT.iconWrapper,children:t("span",{className:Z(eT.overlayIcon,eT.absolute,a),children:t(e,{})})}),eP=e=>{switch(e){case"EATERY":return ee;case"ATTRACTION":case"ACTIVITY":case"PRODUCT":return X;default:return J}},eO=({locationId:e,iconType:a,avatarUrl:r})=>{var l=et(),[{data:n}]=u({query:ew,variables:{locationId:e},pause:!e}),i=eP(n?.locations?.[0]?.placeType),s=`${l}/img2/brand_refresh/Tripadvisor_logoset_solid_green.svg`;switch(a){case"OWNER":return eM(i);case"STAFF":return t(er,{source:s});default:if(r)return t(er,{source:r});return eM(ea,eT.travellerIcon)}},ek={galleryImage:"cfCAA w _Z GA",iconPlacer:"mjouX t s _U l",galleryImageOverlay:"UjksM t s _U l Y",overlayContent:"KyaFN",attribution:"PiZoG b",rating:"zeWUo",icon:"IogKG",nameAndRating:"okDcF e j Pa PP Pn PC",nameAndDate:"oNBHQ K",name:"q",date:"q"},eU=e=>"pano"===e.type?"pano":"v"===e.type?"video_large":null,eB=({media:e,width:a,height:n,locationId:i})=>{var s,{localize:d}=H(),o=Y(),c=e&&e.photoSizes&&U(a,n,e.photoSizes,{getImageBasedOnClientInfo:!0,allowedStretch:0}),u=e?.supplierCategory,m=e?.userProfile?.avatar?.photoSizes?.[1]?.url,f=e?.review?.rating,b=e?.uploadDate,p=b?o.formatDate("date_medium_month_year",new Date(b)):"";return(s="OWNER"===u?d.string("Management","Photoviewer_mgmtFilter"):"STAFF"===u?t(K,{id:"mediaviewer_tripadvisor_provider",messages:"Photo commissioned by <span class=\"{spanClassName}\">Tripadvisor</span>"}):e?.userProfile?.displayName,c)?r(l,{children:[t("div",{className:ek.galleryImage,style:{backgroundImage:`url(${c.url})`}}),t("div",{className:ek.iconPlacer,children:O(e,!1,eU(e))}),t("div",{className:ek.galleryImageOverlay,children:r("div",{className:ek.overlayContent,children:[r("div",{className:ek.attribution,children:[t(eh,{locationId:i,iconType:e?.supplierCategory||"OWNER",avatarUrl:m}),r("div",{className:ek.nameAndRating,children:[r("div",{className:ek.nameAndDate,children:[t("span",{className:ek.name,children:s}),p&&r("span",{className:ek.date,children:["\xa0â€¢\xa0",p]})]}),(f||0===f)&&t("div",{className:ek.rating,children:t($,{rating:f})})]})]}),t("div",{className:ek.icon,children:t(el,{})})]})})]}):t("div",{})},eW={controlsWrapper:"rRjcL",controlsContainer:"ythoN w G5",controlsContent:"EKClu w Pp f k",filtersWrapper:"wWokE",filtersContents:"BBFqV"},eF=()=>t(F,{layout:"grid"}),eG=e=>{var{albumId:a,referenceMediaId:d,openDetailAtOffset:h,categoryId:v,typeId:I,mediaId:C,locationId:y,locationName:A,secondaryTitleContent:L,actionHandler:O,offer:U,adSlot:F,businessContact:q,skipQuickAlbums:Y,disableControls:K,getShareUrlForMedia:$,initialMediasOverride:Z,galleryRendererOverride:X,fullscreenRendererOverride:J,sort:ee,quickAlbumsConfiguration:ea,queryClientOverride:er,heroDataStrategyOverride:et,pageDataStrategyOverride:el,mediaFilterOverride:ei,trackingCallback:es,onVideoTimeUpdate:ed}=e,{localize:eo}=H(),ec=M(),eu=er||"mv",eb=et||"mvh",ep=el||("RECENCY"===ee?"mr":"m"),eh=ea||"mvqa",eI=R(a),eC={locationId:y,albumId:a===E.PANO_ALBUM?E.ALL_ALBUMS:a,client:eu,dataStrategy:eb,filter:ei??N(I),subAlbumId:a===E.PANO_ALBUM?E.PANO_ALBUM:v,referenceMediaId:d},[ey]=u({query:m,variables:eC}),{fetching:eA,data:eL,error:eE}=ey,eR=eL?.mediaAlbum?.status,eN=eA?null:eL?.mediaAlbum?.album;eE&&(console.error("[MASDesktopMediaViewer] albumQuery",eE.message.replace(/Error #[0-9]+/g,"Error #xxx")),eN||O({type:"ERROR",albumId:a,statusCode:-1,errorMessage:eE.message})),eR&&eR>=400&&d&&(console.error(`[MASDesktopMediaViewer] albumQuery received status ${eR}`),O({type:"ERROR",albumId:a,statusCode:eR}));var eS=eN?.mediaList?.[0],ew=eN?.offset||0,eT=i(()=>({locationId:y,albumId:a===E.PANO_ALBUM?E.ALL_ALBUMS:a,subAlbumId:a===E.PANO_ALBUM?E.PANO_ALBUM:v,client:eu,dataStrategy:ep,filter:ei??N(I),offset:0,limit:20}),[y,a,v,eu,ep,I,ei]),[eM,eP]=f({query:b,variables:eT}),eO=Object.keys(eM).length,ek=o(e=>{var a=Math.abs(Math.floor(e/20));return eM?.[a]?eM?.[String(a)]:(eP({offset:20*a,limit:20}),O({type:"PAGED",pageNumber:a}),{fetching:!0,data:null})},[eP,eM,O]),{fetching:eU}=eM[0];c(()=>{eU||ec(P.GALLERY_VIEW_PHOTOS_SEEN,{photosSeen:20*eO})},[eU,eO,ec]);var eB=o(e=>{if(Z?.[e])return Z[e];var a=ew-(Z?.length??0),r=e-(Z?.length??0);if(e===a&&ee!==w.recency)return eS;var t=ek(r);return t?.fetching?null:t?.data?.mediaAlbumPage?.mediaList?.[r%20]},[ek,eS,ew,Z,ee]),eG=o(e=>{var a=eB(e);return a?{media:a,loading:!1}:{loading:!0}},[eB]),eD=n({...T}),[eV,ex]=s(!1),ej=e=>{ex(e)},eq=o((e,a)=>{var r=eB(e);J&&J(r);var l=eN?.totalMediaCount||0;return r?t(k,{media:r,shareUrl:$?$(r):null,totalMediaInfo:{selectedIndex:e,totalCount:l},onSwipeRight:()=>{},onSwipeLeft:()=>{},innateTranslations:!1,businessContact:q,onFullscreenMedia:ej,locationId:y,isActiveViewer:a,trackingCallback:es,onVideoTimeUpdate:ed}):null},[eB,J,$,eN,q,y,es,ed]),eH="grid",eY=n(!1),eK={locationId:y,client:eu,filter:ei??S(),configuration:eh},[ez]=u({query:p,variables:eK,pause:!!Y}),{data:eQ,fetching:e$,error:eZ}=ez;eZ&&O({type:"ERROR",albumId:a,statusCode:-1,errorMessage:eZ.message});var eX=eQ?.mediaWindow?.windowPanes?.[0]?.albums,eJ=eX&&eX.map(e=>({id:e.albumId,titleNode:t(j,{count:e.totalMediaCount,title:e.name}),thumbnailNode:t(B,{width:"100%",height:"100%",sources:e.mediaList?.[0]?.photoSizes||[],alt:e.mediaList?.[0]?.caption||void 0})})),e0=eQ?.mediaWindow?.windowPanes?.[0]?.albums,e4={locationId:y,albumId:a,client:eu,filter:ei??S(),configuration:eI},[e2]=u({query:p,variables:e4,pause:!!K}),{data:e1,error:e3}=e2;e3&&O({type:"ERROR",albumId:a,statusCode:-1,errorMessage:e3.message});var e6=o(e=>{O({type:"SOURCE_CHANGE",typeId:e}),ec(P.GALLERY_VIEW_TYPE_CLICK,{typeId:e}),ec(P.SOURCE_FILTER_CLICK,{typeId:e})},[O,ec]),e9=o(e=>{O({type:"CATEGORY_CHANGE",categoryId:e}),ec(P.GALLERY_VIEW_CATEGORY_CLICK,{categoryId:e}),ec(P.ADVANCED_FILTER_CLICK,{categoryId:e})},[O,ec]),[e5,e7]=s(96),e8=e=>{e7(e)},[ae,aa]=s(!1),ar=e=>{aa(e)},at=o(e=>{O({type:"SORT",sort:e}),ec(P.SORT_TYPE_CHANGE,{sort:e})},[O,ec]),al=o(()=>{if(e1&&e1.mediaWindow?.windowPanes[0]?.albums){var e,{albums:l}=e1.mediaWindow.windowPanes[0];if(a===E.TRAVELER_ALBUM){var n=e0&&e0.find(e=>e.albumId===E.TRAVELER_ALBUM);e={mediaCounts:{TRAVELER:n?.totalMediaCount||0}}}else e=l.find(e=>e.albumId===v);var i=e?e.mediaCounts:null;if(i)return t("div",{className:eW.controlsWrapper,children:t("div",{className:eW.controlsContainer,children:t(em,{onHeightChange:e8,filterExpand:ae,children:r("div",{className:eW.controlsContent,children:[t("div",{className:eW.filtersWrapper,children:r("div",{className:eW.filtersContents,children:[t(ef,{selectedSourceId:I,sourceCounts:i,onSelect:e6}),t(e_,{albums:e1?.mediaWindow?.windowPanes?.[0]?.albums,selectedTypeId:I,onSelect:e9,selectedFilterId:v,selectedAlbumId:a,onExpandChange:ar,trackingCallback:es})]})}),t("div",{children:t(eg,{selectedSort:null!=ee?ee:w.featured,onSelect:at})})]})},"MVControlsContainer")})})}return t("div",{className:eW.controlsContainer,children:t(em,{header:"",loading:!0,onHeightChange:e8,filterExpand:ae,children:t(Q,{height:"100%"})})},"MVControlsContainer")},[e1,v,I,a,e9,e6,e0,ae,ee,at,es]),an=n(!d&&null==h);!an.current&&eD.current.setSelectedIndex&&(eN&&(eN.offset||0===eN.offset)||null!=h)&&(eD.current.setSelectedIndex(h??eN.offset),an.current=!0);var ai=o(e=>{switch(e.type){case W.albumSelect:O({type:"ALBUM",referenceCompoundMediaId:null,albumId:e.albumId}),ec(P.GALLERY_VIEW_ALBUM_CLICK,{albumId:e.albumId});break;case W.galleryItemClicked:ec(P.DETAIL_VIEW_GALLERY_CLICK,{tileDetails:{offset:e.offset,mode:e.mode},isMWRedesign:!0}),ec(P.GRID_VIEW_ITEM_CLICK),ex(!1),O({type:"GALLERY_CLICK",selectedIndex:e.selectedIndex,offset:e.offset,mode:e.mode,newMedia:eG(e.selectedIndex)});break;case W.fullscreenNav:O({type:"FULLSCREEN_NAV",newMedia:eG(e.newIndex),newIndex:e.newIndex});break;case W.fullscreenClose:ec(P.DETAIL_VIEW_DISMISS,{mvDetailViewCloseType:"controls"===e.closeType?"album_change":e.closeType}),"icon_tap"===e.closeType&&ec(P.VIEW_GALLERY_BUTTON_CLICK),"controls"!==e.closeType&&O({type:"FULLSCREEN_CLOSE",closeType:e.closeType});break;case W.scroll:!eY.current&&e.position>0&&(ec(P.GALLERY_VIEW_SCROLL_ENGAGEMENT),eY.current=!0),O({type:"SCROLL",position:e.position});break;case W.close:O({type:"CLOSE"})}},[O,eG,eH,ec]);c(()=>{eD.current.backToTop(),eD.current.closeDetail(),ec(P.GALLERY_VIEW,{isMWRedesign:!0}),eY.current=!1},[a,I,v,ec]),c(()=>{C||eD.current.closeDetail()},[C]);var as=G(eu),ad=D(eh),ao=D(eb),ac=_(eQ,eZ),au=g(eL,eE);return r(en,{errorRenderer:()=>r(l,{children:[t(V,{client:as,approach:ao,status:x.RenderError}),t(V,{client:as,approach:ad,status:x.RenderError})]}),children:[t(z,{close:()=>O({type:"CLOSE"}),galleryRenderer:(e,a,r)=>{var l=eB(e);return X?X(l,a,r):l?t(ev,{media:l,width:a,height:r,locationId:y}):null},fullRenderer:eq,galleryOffsetTop:K?0:e5-2,controlsRenderer:K?null:al,totalCount:eN?.totalMediaCount||0,quickAlbumsDefinition:eJ,selectedAlbumId:a,actionHandler:ai,onTileGalleryControls:e=>{eD.current=e},disableFullscreenNavigation:eV,disableFullscreenClose:eV,titleText:A&&eo.string("Photos of {1}","PhotocC_ffffe1a6",{1:A}),secondaryTitleContent:L,secondaryHeaderContent:U,auxiliaryComponent:F?F():null,layoutStyle:eH,detailCloseButton:t(eF,{}),useHero:!1,noHistoryManipulation:!0}),t(V,{enabled:!eA,client:as,approach:ao,status:au}),t(V,{enabled:!e$,client:as,approach:ad,status:ac})]})};return[()=>{em=eC,ef=ey,eb=eL,ep=eE,e_=eN,eg=eS,eh=eO,ev=eB,e("default",d(eG))},[e=>(r=e.jsxs,t=e.jsx,l=e.Fragment),e=>(n=e.useRef,i=e.useMemo,s=e.useState,d=e.memo,o=e.useCallback,c=e.useEffect),e=>u=e.useQuery,e=>(m=e.albumQuery,f=e.usePaginatedQuery,b=e.albumPageQuery,p=e.quickAlbumsQuery,_=e.getPrimaryPhotoStatusForWindow,g=e.getPrimaryPhotoStatusForAlbum),e=>(h=e.mediaGroups,v=e.getTitleForMediaGroup,I=e.getMediaGroupForString,C=e.idToMediaGroup,y=e.mediaGroupIds,A=e.getMediaGroupStringForId,L=e.categoryIdsThatAreAlbumIdsSet,E=e.AlbumTypes,R=e.getRHRFiltersWindowConfig,N=e.getFilter,S=e.getMediaFilterToRetrieveAllPhotos),e=>w=e.mediaSorts,e=>T=e.DEFAULT_CONTROLS,e=>(M=e.u,P=e.t,O=e.g,k=e.M),e=>(U=e.getSource,B=e.ResponsiveImage),e=>W=e.mvActions,e=>F=e.GalleryButton,e=>(G=e.getClient,D=e.getApproach,V=e.PrimaryPhotoStatusCounter,x=e.Status),e=>j=e.StockTitle,e=>(q=e.default,H=e.useLocalize,Y=e.useIntlFormatter,K=e.UnsafeLocalize),e=>z=e.default,e=>Q=e.Skeleton,e=>$=e.BubbleRating,e=>Z=e.default,e=>X=e.default,e=>J=e.default,e=>ee=e.default,e=>ea=e.default,e=>er=e.Avatar,e=>et=e.useCdnPrefix,e=>el=e.default,e=>en=e.ErrorBoundary,e=>ei=e.useClientSideLayoutEffect,e=>es=e.DropdownMenu,e=>ed=e.default,e=>eo=e.default,e=>ec=e.BorderlessButton,e=>eu=e.ChipButton]]},["21h32l","o4yt4q","mqwhqn","cboiod","3w1vrt","j9pg61","d56uto","0clovu","76j3t0","ykge6s","de5kvz","tsg6fc","wkhu77","7thqz4","p1duv6","qndsds","bkeq24","fkji80","s1ymgp","c5q3iu","o3mm96","j56vim","ljqkwp","s6q22n","74j83y","83pm0d","mb2nze","ntn269","i0z8n1","4ilds0","jppfwt","b1cljk"]]);
